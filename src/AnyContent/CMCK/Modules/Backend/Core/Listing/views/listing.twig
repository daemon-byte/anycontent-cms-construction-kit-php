{% extends "layout-default.twig" %}

{% block title %}{% if definition.Title %}{{ definition.Title }}{% else %}{{ definition.Name }}{% endif %}{% endblock %}


{% block content %}



    {% block listing_header %}
        <div class="row">
            <a href="{{ links.reset }}"><h2>{% if definition.Title %}{{ definition.Title }}{% else %}{{ definition.Name }}{% endif %}</h2></a>
            <br/></div>
    {% endblock %}

    <div class="row">
        {% include "listing-searchbox.twig" %}
    </div>
    {% block listing_content %}
        <div class="row">
            {% if records %}
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th class="col-listing-id"><a href="{{ links.sortById }}">ID</a></th>
                        {% if definition.hasSubtypes() %}
                            <th class="col-listing-subtype"><a href="{{ links.sortBySubtype }}">Subtype</a></th>
                        {% endif %}
                        <th><a href="{{ links.sortByName }}">Name</a></th>
                        <th class="col-listing-lastchange"><a href="{{ links.sortByLastChange }}">Last change</a></th>
                        {% if definition.hasStatusList() %}
                            <th class="col-listing-status"><a href="{{ links.sortByStatus }}">Status</a></th>
                        {% endif %}
                        {% if definition.isSortable() %}
                        <th class="col-listing-position"><a href="{{ links.sortByPosition }}">Position</a></th>
                        {% endif %}
                        <th class="col-listing-buttons"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for record in records %}
                        <tr>
                            <td><a href="{{ record.editUrl }}">{{ record.id }}</a></td>
                            {% if definition.hasSubtypes() %}
                                <td><span class="badge subtype">{{ record.subtype.label }}</span></td>
                            {% endif %}
                            <td><a href="{{ record.editUrl }}">{{ record.name }}</a>
                            </td>

                            <td class="col-listing-lastchange">
                                {% include "listing-userinfo.twig" %}
                            </td>
                            {% if definition.hasStatusList() %}
                                <td><span class="badge status">{{ record.status.label }}</span></td>
                            {% endif %}
                            {% if definition.isSortable() %}
                            <td></td>
                            {% endif %}
                            <td>
                                <a href="{{ record.editUrl }}" class="btn btn-primary">Edit</a>
                                <a href="{{ record.deleteUrl }}"
                                   class="btn btn-danger button_delete">Delete</a>

                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>


                {{ pager | raw }}
            {% endif %}
        </div>
    {% endblock %}



    {% block buttons %}
        <div class="row">
            <hr/>
            {{ buttons | raw }}
        </div>
    {% endblock %}

    <div class="modal fade bs-modal-lg" id="modal_edit" tabindex="-1" role="dialog"
         aria-hidden="true"></div>

{% endblock %}