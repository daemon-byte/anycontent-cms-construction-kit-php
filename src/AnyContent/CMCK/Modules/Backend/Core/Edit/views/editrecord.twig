{% extends "layout-default.twig" %}

{% block content %}
    <div class="row">
        <ol class="breadcrumb">
            <li><a href="/">Home</a></li>
            <li><a href="{{ links.repository }}">{% if repository.title %}{{ repository.title }}{% else %}{{ repository.name }}{% endif %}</a></li>
            <li><a href="{{ links.listRecords }}"
                   title="{{ definition.name }}">{% if definition.title %}{{ definition.title }}{% else %}{{ definition.name }}{% endif %}</a>
            </li>
        </ol>
        {% if record %}

                        <h3><span class="label label-info">#{{ record.id }}
                    <small>.{{ record.revision }}</small></span> {{ record.name }}{% if definition.hasSubtypes() %}
                    <span
                            class="badge primary subtype{% if record.subtype !='' %} subtype-{{ record.subtype|lower }}{% endif %}">{{ record.subtypeLabel }}</span>{% endif %}{% if definition.hasStatusList() %}
                    <span class="badge primary status{% if record.status !='' %} status-{{ record.status|lower }}{% endif %}">{{ record.statusLabel }}</span>{% endif %}</h3>
        {% else %}
            <h3><span class="label label-info">#new</span> New Record</h3>
        {% endif %}
    </div>

    <div class="row">
        <form class="well" role="form" method="post" name="form_edit" action="" id="form_edit" data-event-countdown="0">

            <fieldset>
                {{ form | raw }}
            </fieldset>

            {% if links.edit is defined %}
                <hr/>
                <div class="controls">
                    <div class="btn-toolbar">

                    <span class="btn-group" id="form_edit_button_save">
                        <input type="submit" class="btn btn-primary" href="#" value="{{ save_operation_title }}"
                               id="form_edit_button_submit"/>
                        <input type="hidden" id="form_edit_button_save_operation" name="$hidden[save_operation]"
                               value="{{ save_operation }}">

                        <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#"><span
                                    class="caret"></span></a>
                        <ul class="dropdown-menu" id="form_edit_button_save_options">
                            <li><a href="#" data-operation="save">Save</a></li>
                            <li class="divider"></li>

                            {% if links.transfer is defined %}
                                <li><a href="#" data-operation="save-insert">Save & Insert</a></li>
                                {% if record %}
                                    <li><a href="#" data-operation="save-duplicate">Save & Duplicate</a></li>
                                {% endif %}
                                <li class="divider"></li>
                            {% endif %}
                            <li><a href="#" data-operation="save-list">Save & List</a></li>
                        </ul>
                    </span>

                        {% if record %}
                            {% if links.delete is defined %}
                                <span class="btn-group">
                        <a href="{{ links.delete }}" class="btn btn-danger button_delete">Delete</a>
                    </span>

                                {% if links.transfer is defined %}
                                    <span class="btn-group">
                            <a href="{{ links.transfer }}" class="btn btn-success" role="button"
                               id="form_edit_button_transfer">Transfer</a>
                                </span>
                                {% endif %}
                            {% endif %}

                        {% endif %}

                    </div>

                </div>
            {% endif %}

            <input type="hidden" name="$hidden[workspace]" value="{{ workspaces.current }}">
            <input type="hidden" name="$hidden[language]" value="{{ languages.current }}">
        </form>


    </div>

    {% block buttons %}
        <div class="row">
            <hr/>
            {{ buttons | raw }}
        </div>
    {% endblock %}

    {% include "files-modal-file-zoom.twig" %}
{% endblock %}