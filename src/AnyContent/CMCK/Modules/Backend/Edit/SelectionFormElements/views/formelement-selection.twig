{% extends "formelement-default.twig" %}

{% block input %}

    {% if type=='dropdown' %}

        {% if options|length >20 %}
            <div class="col-xs-3">
                <script>
                    $(function () {
                        var availableTags = {{ json|json_encode|raw }};
                        $("#{{ id }}").autocomplete({
                            source: availableTags,
                            minLength: 0,
                            change: function (event, ui) {
                                if (ui.item == null) {
                                    $("#{{ id }}").val('');
                                    $("#{{ id }}").focus();
                                }
                            }
                        });
                        $("#{{ id }}").click(function () {
                            $("#{{ id }}").val('');
                        });
                    });
                </script>
                <div class="input-group">
                    <input type="text" class="form-control" id="{{ id }}" name="{{ name }}" placeholder=""
                           value="{{ value }}">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-option-horizontal"
                                                          aria-hidden="true"></span></span>

                </div>

            </div>
        {% else %}
            <div class="col-xs-4">

                <select class="form-control" id="{{ id }}" name="{{ name }}">
                    <option value="">...</option>
                    {% for k,v in options %}
                        {% if value == k %}
                            <option value="{{ k }}" selected="selected">{{ v }}</option>
                        {% else %}
                            <option value="{{ k }}">{{ v }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
        {% endif %}

    {% endif %}
    {% if type=='radio' %}
        <div class="col-xs-8">
            {% for k,v in options %}
                <div class="radio">
                    <label>
                        {% if value == k %}
                            <input type="radio" name="{{ name }}" id="{{ id }}_{{ loop.index }}" value="{{ k }}"
                                   checked="checked"> {{ v }}
                        {% else %}
                            <input type="radio" name="{{ name }}" id="{{ id }}_{{ loop.index }}"
                                   value="{{ k }}"> {{ v }}
                        {% endif %}

                    </label>
                </div>

            {% endfor %}
        </div>
    {% endif %}
    {% if type=='toggle' %}
        <div class="col-xs-8">
            {% for k,v in options %}

                <label>
                    {% if value == k %}
                        <label class="radio-inline">
                            <input type="radio" name="{{ name }}" id="{{ id }}_{{ loop.index }}" value="{{ k }}"
                                   checked="checked"> {{ v }}
                        </label>
                    {% else %}
                        <label class="radio-inline">
                            <input type="radio" name="{{ name }}" id="{{ id }}_{{ loop.index }}" value="{{ k }}"
                            > {{ v }}
                        </label>
                    {% endif %}

                </label>


            {% endfor %}
        </div>
    {% endif %}

{% endblock %}