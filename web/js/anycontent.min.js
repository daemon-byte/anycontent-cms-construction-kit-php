/*! AnyContent CMCK 2016-01-09 */
function cmck_modal_id(a,b,c){a="#"+a,$(a).off("shown.bs.modal"),$(a).on("shown.bs.modal",function(){"function"==typeof c&&c()}),$(a).removeData(),$(a+" .modal-header").html(""),$(a+" .modal-body").html(""),$(a+" .modal-footer").html(""),$(a).appendTo("body"),$(a).modal({keyboard:!0}),$(a).load(b)}function cmck_modal(a,b){cmck_modal_id("modal_edit",a,b)}function cmck_modal_id_hide(a){a="#"+a,$(a).modal("hide")}function cmck_modal_hide(){cmck_modal_id_hide("modal_edit")}function cmck_modal_set_property(a,b){$("#form_edit [name="+a+"]").val(b)}function cmck_set_var(a,b){"object"!=typeof $.cmck&&($.cmck={}),$.cmck[a]=b}function cmck_get_var(a,b){return $.cmck[a]}function cmck_trigger_change(a){$(a).trigger("change"),$("iframe").each(function(b,c){"function"==typeof c.contentWindow.cmck_sequence_trigger_change&&c.contentWindow.cmck_sequence_trigger_change(a)})}function cmck_message_info(a){$("#messages").html('<div class="alert alert-info">'+a+"</div>"),$(document).scrollTop(0),$("#messages div").delay(3e3).fadeOut(500)}function cmck_message_alert(a){$("#messages").html('<div class="alert alert-warning">'+a+"</div>"),$(document).scrollTop(0),$("#messages div").delay(3e3).fadeOut(500)}function cmck_message_error(a){$("#messages").html('<div class="alert alert-danger">'+a+"</div>"),$(document).scrollTop(0),$("#messages div").delay(3e3).fadeOut(500)}function cmck_get_cookie(a){var b=window.document.cookie.split(a+"=");return 2==b.length?b.pop().split(";").shift():void 0}function cmck_delete_cookie(a){document.cookie=encodeURIComponent(a)+"=deleted; expires="+new Date(0).toUTCString()}function cmck_document(){return document}$(document).on("cmck",function(a,b){switch(b.type){case"editForm.init":case"sequenceForm.init":case"sequenceForm.refresh":$(".formelement-popover").popover({html:!0}),$(".formelement-tooltip").popover({html:!0})}}),$(document).ready(function(){}),$(document).on("cmck",function(a,b){switch(b.type){case"editform.setProperty":$("#form_edit [name="+b.property+"]").val(b.value),1==b.save&&0==parseInt($("#form_edit").attr("data-event-countdown"))&&$("#form_edit").submit()}}),$(document).ready(function(){$("#form_edit_button_save_options a").click(function(){return $("#form_edit_button_save").removeClass("open"),$("#form_edit_button_save input:first").attr("value",$(this).text()),$("#form_edit_button_save_operation").attr("value",$(this).attr("data-operation")),!1}),$("#form_edit_button_submit").click(function(){return $.event.trigger("cmck",{type:"editform.Save"}),$("#form_edit").submit(),!1}),$("#form_edit").submit(function(){return countdown=parseInt($("#form_edit").attr("data-event-countdown")),0==countdown?(counterrors=0,$(".form-group.mandatory").each(function(){$(this).removeClass("has-error"),idFormelement=$(this).attr("data-formelement"),val="",$('[id^="'+idFormelement+'"]').each(function(){val+=$(this).val().trim(),console.log(val)}),""==val&&($(this).addClass("has-error"),counterrors++)}),counterrors>0?(cmck_message_alert("Please fill in all required fields."),!1):($.blockUI({message:null}),$.post($("#form_edit").attr("action"),$("#form_edit").serialize()).fail(function(a){cmck_message_error("Failed to save record. Please try again later or contact your administrator."),$.unblockUI()}).done(function(a){if(void 0!=a.success){if(1==a.success)return location.href=a.redirect,!1;if(void 0!=a.message){if(cmck_message_alert(a.message),void 0!=a.properties)for(i=0;i<a.properties.length;i++)property=a.properties[i],input=$('input[name="'+property+'"]'),id=input.attr("id"),$('div.form-group[data-formelement="'+id+'"]').addClass("has-error");return $.unblockUI(),!1}}cmck_message_error("Failed to save record. Please try again later or contact your administrator."),$.unblockUI()}),!1)):!1}),$("#form_edit_button_transfer").click(function(){return cmck_modal($(this).attr("href")),!1}),$(document).keydown(function(a){return"115"!=a.which&&"83"!=a.which||!a.ctrlKey&&!a.metaKey?!0:(a.preventDefault(),$("#form_edit_button_submit").click(),!1)}),$.event.trigger("cmck",{type:"editForm.init"})}),$(document).ready(function(){$(".feedback .alert-success").delay(2e3).fadeOut(500),$(".feedback .alert-info").delay(2500).fadeOut(500),$(".feedback .alert-warning").delay(3e3).fadeOut(500),$(".feedback .alert-danger").delay(4500).fadeOut(500)}),$(".timeshift-blink").each(function(){var a=$(this);setInterval(function(){"hidden"==a.css("visibility")?a.css("visibility","visible"):a.css("visibility","hidden")},500)}),$(document).ready(function(){$("#listing_filter select").change(function(){$("#listing_filter").submit()})}),$(document).ready(function(){$("ol.sortable-tree").nestedSortable({handle:"div",items:"li.sortable-item",toleranceElement:"> div",protectRoot:!0,opacity:.5,revert:250,tabSize:10,tolerance:"pointer",connectWith:".sortable-tree"}),$("#form_sort_button_save").click(function(){$("ol.sortable-tree").nestedSortable({items:"li"}),nested=$("ol.sortable-tree").nestedSortable("toArray",{startDepthCount:-1}),tree=new Array,$.each(nested,function(a,b){if(b.depth>0){var c={id:b.item_id,parent_id:b.parent_id};tree.push(c)}}),$.blockUI({message:null}),$("#form_sort_list").val(JSON.stringify(tree))})}),function(a){a(document).on("cmck",function(b,c){switch(c.type){case"editForm.init":case"sequenceForm.init":case"sequenceForm.refresh":a(".datepicker").each(function(){a(this).datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",showWeek:!1,firstDay:1,numberOfMonths:1,showButtonPanel:!1})})}})}(jQuery);